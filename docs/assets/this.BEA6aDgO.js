import{b as y,h as c,m as I,ah as N,H as S,n as R,s as q,o as _,r as b,d as T,p as o,q as L,ai as Y,aj as g,ad as x,ac as D,ak as F,Y as H}from"./template.B4vP3J5v.js";function j(r,f,t=!1){c&&I();var i=r,s=null,a=null,l=Y,v=t?N:0,n=!1;const A=(u,e=!0)=>{n=!0,h(e,u)},h=(u,e)=>{if(l===(l=u))return;let d=!1;if(c){const k=i.data===S;!!l===k&&(i=R(),q(i),_(!1),d=!0)}l?(s?b(s):e&&(s=T(()=>e(i))),a&&o(a,()=>{a=null})):(a?b(a):e&&(a=T(()=>e(i))),s&&o(s,()=>{s=null})),d&&_(!0)};y(()=>{n=!1,f(A),n||h(null,null)},v),c&&(i=L)}function E(r,f){return r===f||r?.[H]===f}function p(r={},f,t,i){return g(()=>{var s,a;return x(()=>{s=a,a=[],D(()=>{r!==t(...a)&&(f(r,...a),s&&E(t(...s),r)&&f(null,...s))})}),()=>{F(()=>{a&&E(t(...a),r)&&f(null,...a)})}}),r}export{p as b,j as i};
