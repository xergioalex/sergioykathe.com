import{ag as p,N as b,ah as A,R as L,ai as g,F as u,C as E,D as x,G as f,O as C,aj as H,ak as I,z as Y,l as j,al as k,am as N,an as q,ao as c,i as M,q as S,p as V,x as m,ap as $,v as z,b as F,aq as G,ar as P}from"./template.DVlVoHZ-.js";function J(e,a){var t=null==a?"":"object"==typeof a?a+"":a;t!==(e.__t??=e.nodeValue)&&(e.__t=t,e.nodeValue=null==t?"":t+"")}function W(e,a){return D(e,a)}function K(e,a){p(),a.intro=a.intro??!1;const t=a.target,n=m,s=f;try{for(var r=b(t);r&&(8!==r.nodeType||r.data!==A);)r=L(r);if(!r)throw g;u(!0),E(r),x();const n=D(e,{...a,anchor:r});if(null===f||8!==f.nodeType||f.data!==C)throw H(),g;return u(!1),n}catch(n){if(n===g)return!1===a.recover&&I(),p(),Y(t),u(!1),W(e,a);throw n}finally{u(n),E(s)}}const d=new Map;function D(e,{target:a,anchor:t,props:n={},events:s,context:r,intro:o=!0}){p();var i=new Set,v=e=>{for(var t=0;t<e.length;t++){var n=e[t];if(!i.has(n)){i.add(n);var s=G(n);a.addEventListener(n,c,{passive:s});var r=d.get(n);void 0===r?(document.addEventListener(n,c,{passive:s}),d.set(n,1)):d.set(n,r+1)}}};v(j(k)),N.add(v);var u=void 0,l=q((()=>{var o=t??a.appendChild(M());return S((()=>{r&&(V({}),P.c=r);s&&(n.$$events=s),m&&$(o,null),u=e(o,n)||{},m&&(z.nodes_end=f),r&&F()})),()=>{for(var e of i){a.removeEventListener(e,c);var n=d.get(e);0==--n?(document.removeEventListener(e,c),d.delete(e)):d.set(e,n)}N.delete(v),o!==t&&o.parentNode?.removeChild(o)}}));return w.set(u,l),u}let w=new WeakMap;function Q(e,a){const t=w.get(e);return t?(w.delete(e),t(a)):Promise.resolve()}export{K as h,W as m,J as s,Q as u};