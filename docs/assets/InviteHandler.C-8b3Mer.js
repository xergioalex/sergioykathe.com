import{c as Na,o as ha,i as fa}from"./index-client.CISZeMRU.js";import{h as j,l as Ia,q as Sa,D as La,aJ as Ta,x as Aa,Q as Ua,a0 as Ha,$ as Qa,a8 as qa,k as Pa,am as Ga,o as ma,W as Ja,ak as $a,aK as Wa,p as ua,m as O,g as a,s as h,a9 as Ka,aa as Va,t as u,e as s,d as i,r,R as U,a as p,b as ya,S as Ya,aL as ja,T as Ba,n as Xa,f as Oa,u as Za,U as at}from"./template.LJwQLpMB.js";import{s as A}from"./render.STtnCVzh.js";import{i as S,b as Da}from"./this.BqRXYm-0.js";import{p as D}from"./props.tuNG3it9.js";import{e as Ca,i as Ma}from"./each.C8qbZMES.js";import{b as tt}from"./input.tZi1eWRs.js";import{a as et}from"./analytics.DfSQxh5K.js";import{g as rt}from"./invite.C41q0KXj.js";function st(a,t,e=!1,s=!1,r=!1){var n=a,i="";j((()=>{var a=La;if(i!==(i=t()??"")){if(null!==a.nodes_start&&(Ta(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),""!==i){if(Ia){Aa.data;for(var r=Sa(),o=r;null!==r&&(8!==r.nodeType||""!==r.data);)o=r,r=Ua(r);if(null===r)throw Ha(),Qa;return qa(Aa,o),void(n=Pa(r))}var c=i+"";e?c=`<svg>${c}</svg>`:s&&(c=`<math>${c}</math>`);var l=Ga(c);if((e||s)&&(l=ma(l)),qa(ma(l),l.lastChild),e||s)for(;ma(l);)n.before(ma(l));else n.before(l)}}else Ia&&Sa()}))}function Ea(a,t,e){if(a.multiple)return it(a,t);for(var s of a.options){var r=va(s);if(Wa(r,t))return void(s.selected=!0)}(!e||void 0!==t)&&(a.selectedIndex=-1)}function nt(a,t){$a((()=>{var t=new MutationObserver((()=>{var t=a.__value;Ea(a,t)}));return t.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}}))}function za(a,t,e=t){var s=!0;Ja(a,"change",(t=>{var s,r=t?"[selected]":":checked";if(a.multiple)s=[].map.call(a.querySelectorAll(r),va);else{var n=a.querySelector(r)??a.querySelector("option:not([disabled])");s=n&&va(n)}e(s)})),$a((()=>{var r=t();if(Ea(a,r,s),s&&void 0===r){var n=a.querySelector(":checked");null!==n&&(r=va(n),e(r))}a.__value=r,s=!1})),nt(a)}function it(a,t){for(var e of a.options)e.selected=~t.indexOf(va(e))}function va(a){return"__value"in a?a.__value:a.value}var ot=u('<span class="block mt-2">Además, tienes la opción de alojarte en la finca</span>'),lt=u("<option> </option>"),ct=u("<option> </option>"),dt=u('<div class="space-y-2 mt-6"><label for="stayAttendance" class="block text-center text-base text-gray-700 dark:text-gray-300">¿Cuántas personas se alojarán en la finca? <span class="block text-sm text-gray-500 dark:text-gray-400 mt-1"> </span></label> <select id="stayAttendance" required class="mt-4 mx-auto block w-48 text-center rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white text-base py-2"></select></div>'),vt=Ba('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),pt=u('<div class="space-y-4"><div class="text-center"><h4 class="text-2xl font-semibold mb-3"> </h4> <p class="text-gray-600 dark:text-gray-400 mt-1 text-lg">Nos encantaría que nos acompañes en este día tan especial <!></p></div> <form class="space-y-6"><div class="space-y-2"><label for="partyAttendance" class="block text-center text-base text-gray-700 dark:text-gray-300">¿Cuántas personas confirmas que asistirán? <span class="block text-sm text-gray-500 dark:text-gray-400 mt-1"> </span></label> <select id="partyAttendance" required class="mt-4 mx-auto block w-48 text-center rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white text-base py-2"></select></div> <!> <div class="space-y-2 mt-6"><label for="message" class="block text-center text-base text-gray-700 dark:text-gray-300">¿Quieres dejarles un mensaje a los novios? (opcional)</label> <textarea id="message" placeholder="Escribe tu mensaje aquí..." class="mt-2 w-full px-4 py-2 rounded-md border-2 border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white text-base resize-none hover:border-primary transition-colors duration-200" rows="3"></textarea></div> <div class="flex justify-center mt-6"><button type="submit" class="btn btn-primary"><!> </button></div></form></div>'),mt=u('<p class="text-gray-600 dark:text-gray-400"> </p>'),ft=u('<div class="text-center space-y-4"><div class="flex justify-center items-center gap-2"><span class="text-5xl">✨</span> <span class="text-5xl">💝</span> <span class="text-5xl">✨</span></div> <h4 class="text-2xl font-script text-primary">¡Gracias por confirmar!</h4> <p class="text-gray-600 dark:text-gray-400"> </p> <!> <div class="w-full h-px bg-gray-200 dark:bg-slate-800 my-4"></div> <p class="text-sm text-gray-500 dark:text-gray-400">Si necesitas modificar tu confirmación más adelante, podrás hacerlo en cualquier momento</p> <button class="btn btn-primary mt-6"><span class="flex items-center justify-center gap-2">Aceptar</span></button></div>'),ut=u('<dialog class="hidden bg-transparent p-0 backdrop:bg-black backdrop:bg-opacity-50 [&amp;[open]]:flex items-center justify-center w-full h-full fixed inset-0 svelte-k3kgo8"><div class="bg-white rounded-lg w-full max-w-[600px] mx-0 sm:mx-4 dark:bg-slate-900"><div class="p-4 border-b flex justify-between items-center"><h3 class="text-base font-semibold flex items-center gap-2"><span class="text-primary">💌</span> Confirmar asistencia</h3> <button class="text-gray-500">✕</button></div> <div class="p-4"><!></div></div></dialog>');function yt(t,e){ua(e,!1);let n=D(e,"invite",8);const o=Na();let c=O(),l=O(!1),d=O(!1),m=O(n().partyInvitations),u=O(n().stayInvitations),v=O("");const f="entry.23826224",y="entry.1899043457",b="entry.427068344",x="entry.446464576",g="entry.424554911",k="entry.38093445",w="entry.802664838";function I(){h(l,!1),a(c)?.close(),o("close")}async function $(t){t.preventDefault(),h(d,!0);try{const t=new FormData;t.append(f,n().code),t.append(y,n().name),t.append(b,n().partyInvitations.toString()),t.append(x,a(m).toString()),t.append(g,n().stayInvitations.toString()),t.append(k,a(u).toString()),t.append(w,a(v).trim()),et.capture("confirmation_submitted",{inviteCode:n().code,partyAttendance:a(m),stayAttendance:a(u),hasMessage:a(v).trim().length>0}),await fetch("https://docs.google.com/forms/d/e/1FAIpQLSfPN3oQllE8Sc50IbpbxW4WkFsODtgeznrpPQ6xyGg1SftYdA/formResponse",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}),h(l,!0),localStorage.setItem(`confirmation-${n().code}`,JSON.stringify({partyAttendance:a(m),stayInvitations:a(u),message:a(v),lastUpdate:(new Date).toISOString()})),o("confirmationUpdate",{partyAttendance:a(m),stayInvitations:a(u),message:a(v),lastUpdate:(new Date).toISOString()})}catch(a){console.error("Error al enviar el formulario:",a)}finally{h(d,!1)}}ha((()=>{a(c)?.showModal(),h(v,"");const t=localStorage.getItem(`confirmation-${n().code}`);if(t){const a=JSON.parse(t);h(m,a.partyAttendance),h(u,a.stayInvitations)}})),Ka((()=>a(m)),(()=>{0===a(m)&&h(u,0)})),Va(),fa();var q=ut(),C=s(q),z=s(C),_=i(s(z),2);r(z);var M=i(z,2),N=s(M),E=t=>{var e=pt(),o=s(e),c=s(o),l=s(c);r(c);var f=i(c,2),y=i(s(f)),b=a=>{var t=ot();p(a,t)};S(y,(a=>{n().stayInvitations>0&&a(b)})),r(f),r(o);var x=i(o,2),g=s(x),k=s(g),w=i(s(k)),I=s(w);r(w),r(k);var q=i(k,2);j((()=>{a(m),ja((()=>{n()}))})),Ca(q,5,(()=>[...Array(n().partyInvitations+1).keys()]),Ma,((t,e)=>{var n=lt(),i={},o=s(n);r(n),j((()=>{i!==(i=a(e))&&(n.value=(n.__value=a(e))??""),A(o,`${a(e)??""} ${1===a(e)?"persona":"personas"}`)})),p(t,n)})),r(q),r(g);var O=i(g,2),D=t=>{var e=dt(),o=s(e),c=i(s(o)),l=s(c);r(c),r(o);var d=i(o,2);j((()=>{a(u),ja((()=>{a(m),n()}))})),Ca(d,5,(()=>[...Array(Math.min(a(m),n().stayInvitations)+1).keys()]),Ma,((t,e)=>{var n=ct(),i={},o=s(n);r(n),j((()=>{i!==(i=a(e))&&(n.value=(n.__value=a(e))??""),A(o,`${a(e)??""} ${1===a(e)?"persona":"personas"}`)})),p(t,n)})),r(d),r(e),j((()=>A(l,`(Dispones de ${n().stayInvitations??""}\n                    ${1===n().stayInvitations?"plaza":"plazas"} para alojamiento)`))),za(d,(()=>a(u)),(a=>h(u,a))),p(t,e)};S(O,(t=>{n()&&n().stayInvitations>0&&a(m)>0&&t(D)}));var C=i(O,2),z=i(s(C),2);Ya(z),r(C);var _=i(C,2),M=s(_),N=s(M),E=a=>{var t=vt();p(a,t)};S(N,(t=>{a(d)&&t(E)}));var Q=i(N);r(M),r(_),r(x),r(e),j((()=>{A(l,`¡Hola, ${n().name??""}!`),A(I,`(De las ${n().partyInvitations??""}\n                  ${1===n().partyInvitations?"plaza reservada":"plazas reservadas"})`),M.disabled=a(d),A(Q," "+(a(d)?"Enviando...":"Confirmar asistencia"))})),za(q,(()=>a(m)),(a=>h(m,a))),tt(z,(()=>a(v)),(a=>h(v,a))),U("submit",x,$),p(t,e)},Q=t=>{var e=ft(),o=i(s(e),4),c=s(o,!0);r(o);var l=i(o,2),d=t=>{var e=mt(),n=s(e);r(e),j((()=>A(n,`Además, ${1===a(u)?"disfrutarás del alojamiento":`${a(u)} personas disfrutarán del alojamiento`} en la finca 🏡`))),p(t,e)};S(l,(t=>{n()&&n().stayInvitations>0&&a(u)>0&&t(d)}));var v=i(l,6);r(e),j((()=>A(c,0===a(m)?"Lamentamos que no puedas acompañarnos en este día tan especial":1===a(m)?"Nos alegra mucho saber que nos acompañarás en este día tan especial":`Nos alegra mucho saber que nos acompañarán ${a(m)} personas en este día tan especial`))),U("click",v,I),p(t,e)};S(N,(t=>{a(l)?t(Q,!1):t(E)})),r(M),r(C),r(q),Da(q,(a=>h(c,a)),(()=>a(c))),U("click",_,I),U("click",q,(({target:t})=>t===a(c)&&I())),p(t,q),ya()}var bt=u('<dialog class="hidden bg-transparent p-0 backdrop:bg-black backdrop:bg-opacity-50 [&amp;[open]]:flex items-center justify-center w-full h-full fixed inset-0 svelte-13t4ywx"><div class="bg-white rounded-lg w-full max-w-[600px] mx-4 dark:bg-slate-900"><div class="p-4 border-b flex justify-between items-center"><h3 class="text-lg font-semibold flex items-center gap-2"><span class="text-primary">ℹ️</span> Información</h3> <button class="text-gray-500">✕</button></div> <div class="p-6"><div class="text-center space-y-4"><h4 class="text-xl font-semibold">Invitación no encontrada</h4> <p class="text-gray-600 dark:text-gray-400">Para confirmar tu asistencia, debes usar el enlace de invitación que se te ha proporcionado.</p> <p class="text-gray-600 dark:text-gray-400">Si aún no cuentas con uno, por favor comunícate con Sergio o Katherine para solicitar una invitación.</p> <button class="btn btn-primary mt-4">Entendido</button></div></div></div></dialog>');function gt(t,e){ua(e,!1);const n=Na();let o=O();function c(){a(o)?.close(),n("close")}ha((()=>{a(o)?.showModal()})),fa();var l=bt(),d=s(l),m=s(d),u=i(s(m),2);r(m);var v=i(m,2),f=s(v),y=i(s(f),6);r(f),r(v),r(d),r(l),Da(l,(a=>h(o,a)),(()=>a(o))),U("click",u,c),U("click",y,c),U("click",l,(({target:t})=>t===a(o)&&c())),p(t,l),ya()}var xt=u('<p class="text-base text-secondary dark:text-blue-200 font-bold tracking-wide uppercase intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter mb-4"> </p>'),_t=u("<br><b>Cupos de alojamiento:</b> ",1),ht=u('<a href="#rsvp" class="btn btn-primary w-full sm:w-auto">Confirmar asistencia <span class="ml-2">→</span></a>'),kt=u('<div class="basis-1/2 text-center lg:text-left pb-10 md:pb-16 mx-auto"><!> <h1 class="text-5xl md:text-6xl font-bold leading-tighter tracking-tighter mb-4 font-heading dark:text-gray-200 intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"> </h1> <div class="max-w-3xl mx-auto lg:max-w-none"><p class="text-xl text-muted mb-6 dark:text-slate-300 intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"> </p> <p class="text-xl text-secondary mb-6 dark:text-slate-300 intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"><!> <!></p> <div class="max-w-xs sm:max-w-md m-auto flex flex-nowrap flex-col sm:flex-row sm:justify-center gap-4 lg:justify-start lg:m-0 lg:max-w-7xl intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"><!> <a href="#evento" class="btn w-full sm:w-auto">Más información</a></div></div></div>');function wt(a,t){ua(t,!1);let e=D(t,"invite",8),n=D(t,"title",8),o=D(t,"subtitle",8),c=D(t,"content",8),l=D(t,"tagline",8);fa();var d=kt(),m=s(d),u=a=>{var t=xt(),e=s(t,!0);r(t),j((()=>A(e,l()))),p(a,t)};S(m,(a=>{l()&&a(u)}));var v=i(m,2),f=s(v,!0);r(v);var y=i(v,2),b=s(y),x=s(b,!0);r(b);var g=i(b,2),h=s(g);st(h,(()=>e()?0===e().partyInvitations?"<b>Fecha:</b> 22 de marzo de 2025":`<b>Fecha:</b> 22 de marzo de 2025<br><b>Número de invitados:</b> ${e().partyInvitations}`:c()));var k=i(h,2),w=a=>{var t=_t(),s=i(Oa(t),2);j((()=>A(s,` ${e().stayInvitations??""}`))),p(a,t)};S(k,(a=>{e()&&e().stayInvitations>0&&a(w)})),r(g);var I=i(g,2),$=s(I),q=a=>{var t=ht();p(a,t)};S($,(a=>{(!e()||e().partyInvitations>0)&&a(q)})),Xa(2),r(I),r(y),r(d),j((()=>{A(f,e()?`${e().name}`:n()),A(x,e()?0===e().partyInvitations?"Queremos compartir contigo la alegría de nuestro matrimonio y hacerte partícipe de este momento tan especial aunque no puedas acompañarnos físicamente.":e().isGroup?`Nos llena de alegría ${"female"===e().genre?"invitarlas":"invitarlos"} a ser parte de este momento tan especial en el que unimos nuestras vidas por siempre.`:"Nos llena de alegría invitarte a ser parte de este momento tan especial en el que unimos nuestras vidas por siempre.":o())})),p(a,d),ya()}var It=u('<div class="flex justify-center items-center min-h-[200px]"><div class="animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"></div></div>'),St=u('<div class="space-y-4"><p class="text-lg">Queremos compartir contigo la alegría de nuestro matrimonio y hacerte partícipe de este momento tan\n              especial.</p> <p class="text-lg text-muted">Sabemos que no podrás acompañarnos físicamente, pero tu cariño y buenos deseos estarán con nosotros en\n              este día tan especial.</p></div>'),At=u('<p class="text-lg"> </p>'),qt=u('<p class="text-lg text-primary opacity-100"> </p>'),jt=u('<div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"><p class="text-green-700 dark:text-green-300"> <!></p> <p class="text-sm text-green-600 dark:text-green-400 mt-1"> </p></div>'),Ct=u('<button type="button" class="btn btn-primary w-full sm:w-auto"> </button>'),Mt=u('<div class="space-y-4 opacity-100"><h3 class="text-2xl font-semibold text-primary"> </h3> <!> <!> <!> <!></div>'),zt=u('<div class="space-y-4"><h3 class="text-2xl font-semibold text-primary">¿Tienes una invitación? 💌</h3> <p class="text-lg">Para confirmar tu asistencia, necesitas usar el enlace de invitación que te proporcionamos.</p> <p class="text-muted">Si aún no tienes uno, contacta con nosotros para solicitar tu invitación.</p> <button type="button" class="btn btn-primary w-full sm:w-auto">Verificar invitación</button></div>'),Nt=u('<div class="space-y-6 opacity-100"><!></div>'),$t=u('<button type="button" class="btn btn-primary w-full sm:w-auto"><span class="flex items-center justify-center">Confirmar asistencia <span class="ml-2">→</span></span></button>'),Ot=u("<!> <!> <!>",1);function Gt(t,e){ua(e,!1);let n=D(e,"showFullInfo",8,!1),o=D(e,"title",8,""),c=D(e,"subtitle",8,""),l=D(e,"content",8,""),d=D(e,"tagline",8,""),m=D(e,"heroMode",8,!1),u=O(),v=O(!1),f=O(!1),y=O(!0),b=O(null);async function x(){try{const t=await async function(){try{return(await(await fetch("/data/invites.json")).json()).invites}catch(a){return console.error("Error loading invites:",a),[]}}(),e=rt();if(h(u,t.find((a=>a.code===e))),a(u)){const t=localStorage.getItem(`confirmation-${a(u).code}`);t&&h(b,JSON.parse(t))}}catch(a){console.error("Error initializing:",a)}finally{h(y,!1)}}function g(){a(u)?h(v,!0):h(f,!0)}function k(a){h(b,a.detail)}ha((()=>{x()})),fa();var w=Ot(),I=Oa(w),$=a=>{var t=It();p(a,t)},q=(t,e)=>{var v=t=>{wt(t,{get invite(){return a(u)},get title(){return o()},get subtitle(){return c()},get content(){return l()},get tagline(){return d()}})},f=(t,e)=>{var o=t=>{var e=Nt(),n=s(e),o=t=>{var e=Mt(),n=s(e),o=s(n);r(n);var c=i(n,2),l=a=>{var t=St();p(a,t)},d=t=>{var e=At(),n=s(e);r(e),j((()=>A(n,`Tienes ${a(u).partyInvitations??""}\n            ${1===a(u).partyInvitations?"invitación":"invitaciones"} para nuestro evento`))),p(t,e)};S(c,(t=>{0===a(u).partyInvitations?t(l):t(d,!1)}));var m=i(c,2),v=t=>{var e=qt(),n=s(e);r(e),j((()=>A(n,`¡Además ${a(u).isGroup?"female"===a(u).genre?"están invitadas":"están invitados":"female"===a(u).genre?"estás invitada":"estás invitado"}\n            a quedarte en la finca! Tienes ${a(u).stayInvitations??""}\n            ${1===a(u).stayInvitations?"plaza disponible":"plazas disponibles"} para alojamiento.`))),p(t,e)};S(m,(t=>{a(u).stayInvitations>0&&t(v)}));var f=i(m,2),y=t=>{var e=jt(),n=s(e),o=s(n),c=i(o),l=t=>{var e=at();j((()=>A(e,`y ${a(b).stayInvitations??""} para alojamiento`))),p(t,e)};S(c,(t=>{a(b).stayInvitations>0&&t(l)})),r(n);var d=i(n,2),m=s(d);r(d),r(e),j((t=>{A(o,`Has confirmado ${a(b).partyAttendance??""}\n              ${1===a(b).partyAttendance?"asistente":"asistentes"} `),A(m,`Última actualización: ${t??""}`)}),[()=>new Date(a(b).lastUpdate).toLocaleString()],Za),p(t,e)};S(f,(t=>{a(b)&&t(y)}));var x=i(f,2),h=t=>{var e=Ct(),n=s(e,!0);r(e),j((()=>A(n,a(b)?"Actualizar Confirmación":"Confirmar mi Asistencia"))),U("click",e,g),p(t,e)};S(x,(t=>{a(u).partyInvitations>0&&t(h)})),r(e),j((()=>A(o,`¡Hola, ${a(u).name??""}! 👋`))),p(t,e)},c=a=>{var t=zt(),e=i(s(t),6);r(t),U("click",e,g),p(a,t)};S(n,(t=>{a(u)?t(o):t(c,!1)})),r(e),p(t,e)},c=a=>{var t=$t();U("click",t,g),p(a,t)};S(t,(a=>{n()?a(o):a(c,!1)}),e)};S(t,(a=>{m()?a(v):a(f,!1)}),e)};S(I,(t=>{a(y)?t($):t(q,!1)}));var C=i(I,2),z=t=>{yt(t,{get invite(){return a(u)},$$events:{close:()=>h(v,!1),confirmationUpdate:k}})};S(C,(t=>{a(v)&&a(u)&&t(z)}));var _=i(C,2),M=a=>{gt(a,{$$events:{close:()=>h(f,!1)}})};S(_,(t=>{a(f)&&t(M)})),p(t,w),ya()}export{Gt as default};