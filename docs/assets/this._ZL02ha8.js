import{b as I,h as u,a as N,an as S,V as k,W as R,s as L,X as d,O as b,c as T,P as o,d as O,ao as g,m as q,am as x,al as D,ap as F,ac as P}from"./template.BeL5O7W-.js";function p(r,f,t=!1){u&&N();var i=r,s=null,a=null,l=g,v=t?S:0,n=!1;const A=(c,e=!0)=>{n=!0,h(e,c)},h=(c,e)=>{if(l===(l=c))return;let _=!1;if(u){const y=i.data===k;!!l===y&&(i=R(),L(i),d(!1),_=!0)}l?(s?b(s):e&&(s=T(()=>e(i))),a&&o(a,()=>{a=null})):(a?b(a):e&&(a=T(()=>e(i))),s&&o(s,()=>{s=null})),_&&d(!0)};I(()=>{n=!1,f(A),n||h(null,null)},v),u&&(i=O)}function E(r,f){return r===f||r?.[P]===f}function B(r={},f,t,i){return q(()=>{var s,a;return x(()=>{s=a,a=[],D(()=>{r!==t(...a)&&(f(r,...a),s&&E(t(...s),r)&&f(null,...s))})}),()=>{F(()=>{a&&E(t(...a),r)&&f(null,...a)})}}),r}export{B as b,p as i};
