import{c as Dt,o as ht,i as ft}from"./index-client.CbTEV4K8.js";import{b as Tt,h as It,a as St,c as Ut,d as At,g as Pt,e as Qt,H as Jt,f as jt,s as Gt,i as Vt,j as Wt,k as Bt,l as Yt,m as Et,p as ut,n as O,o as t,q as b,r as Kt,t as Xt,u as r,v as s,w as e,x as L,y as m,z as yt,A as _,B as A,C as qt,D as Zt,E as ta,F as Ct,G as mt,I as Mt,J as aa}from"./template.BeL5O7W-.js";import{s as g}from"./render.BBQl6zkD.js";import{i as S,b as Ft}from"./this._ZL02ha8.js";import{p as D}from"./props.DVnMS23L.js";import{e as zt,i as Nt}from"./each.DsbVd6nw.js";import{b as ea}from"./input.DKgCEpWB.js";import{i as ra}from"./proxy.D-_TBBpT.js";import{g as na}from"./invite.C41q0KXj.js";function sa(t,a,e,s,r){var n,i=t,o="";Tt((()=>{o!==(o=a()??"")?(void 0!==n&&(Bt(n),n=void 0),""!==o&&(n=Ut((()=>{if(It){At.data;for(var t=St(),a=t;null!==t&&(8!==t.nodeType||""!==t.data);)a=t,t=Pt(t);if(null===t)throw Qt(),Jt;return jt(At,a),void(i=Gt(t))}var e=Vt(o+"");jt(Wt(e),e.lastChild),i.before(e)})))):It&&St()}))}function $t(t,a,e){if(t.multiple)return oa(t,a);for(var s of t.options){var r=ct(s);if(ra(r,a))return void(s.selected=!0)}(!e||void 0!==a)&&(t.selectedIndex=-1)}function ia(t,a){Et((()=>{var a=new MutationObserver((()=>{var a=t.__value;$t(t,a)}));return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}}))}function Ot(t,a,e=a){var s=!0;Yt(t,"change",(a=>{var s,r=a?"[selected]":":checked";if(t.multiple)s=[].map.call(t.querySelectorAll(r),ct);else{var n=t.querySelector(r)??t.querySelector("option:not([disabled])");s=n&&ct(n)}e(s)})),Et((()=>{var r=a();if($t(t,r,s),s&&void 0===r){var n=t.querySelector(":checked");null!==n&&(r=ct(n),e(r))}t.__value=r,s=!1})),ia(t)}function oa(t,a){for(var e of t.options)e.selected=~a.indexOf(ct(e))}function ct(t){return"__value"in t?t.__value:t.value}var la=_('<span class="block mt-2">Además, tienes la opción de alojarte en la finca</span>'),ca=_("<option> </option>"),da=_("<option> </option>"),va=_('<div class="space-y-2 mt-6"><label for="stayAttendance" class="block text-center text-base text-gray-700 dark:text-gray-300">¿Cuántas personas se alojarán en la finca? <span class="block text-sm text-gray-500 dark:text-gray-400 mt-1"> </span></label> <select id="stayAttendance" required class="mt-4 mx-auto block w-48 text-center rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white text-base py-2"></select></div>'),pa=ta('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),ma=_('<div class="space-y-4"><div class="text-center"><h4 class="text-2xl font-semibold mb-3"> </h4> <p class="text-gray-600 dark:text-gray-400 mt-1 text-lg">Nos encantaría que nos acompañes en este día tan especial <!></p></div> <form class="space-y-6"><div class="space-y-2"><label for="partyAttendance" class="block text-center text-base text-gray-700 dark:text-gray-300">¿Cuántas personas confirmas que asistirán? <span class="block text-sm text-gray-500 dark:text-gray-400 mt-1"> </span></label> <select id="partyAttendance" required class="mt-4 mx-auto block w-48 text-center rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white text-base py-2"></select></div> <!> <div class="space-y-2 mt-6"><label for="message" class="block text-center text-base text-gray-700 dark:text-gray-300">¿Quieres dejarles un mensaje a los novios? (opcional)</label> <textarea id="message" placeholder="Escribe tu mensaje aquí..." class="mt-2 w-full px-4 py-2 rounded-md border-2 border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white text-base resize-none hover:border-primary transition-colors duration-200" rows="3"></textarea></div> <div class="flex justify-center mt-6"><button type="submit" class="btn btn-primary"><!> </button></div></form></div>'),fa=_('<p class="text-gray-600 dark:text-gray-400"> </p>'),ua=_('<div class="text-center space-y-4"><div class="flex justify-center items-center gap-2"><span class="text-5xl">✨</span> <span class="text-5xl">💝</span> <span class="text-5xl">✨</span></div> <h4 class="text-2xl font-script text-primary">¡Gracias por confirmar!</h4> <p class="text-gray-600 dark:text-gray-400"> </p> <!> <div class="w-full h-px bg-gray-200 dark:bg-slate-800 my-4"></div> <p class="text-sm text-gray-500 dark:text-gray-400">Si necesitas modificar tu confirmación más adelante, podrás hacerlo en cualquier momento</p> <button class="btn btn-primary mt-6"><span class="flex items-center justify-center gap-2">Aceptar</span></button></div>'),ya=_('<dialog class="hidden bg-transparent p-0 backdrop:bg-black backdrop:bg-opacity-50 [&amp;[open]]:flex items-center justify-center w-full h-full fixed inset-0 svelte-k3kgo8"><div class="bg-white rounded-lg w-full max-w-[600px] mx-0 sm:mx-4 dark:bg-slate-900"><div class="p-4 border-b flex justify-between items-center"><h3 class="text-base font-semibold flex items-center gap-2"><span class="text-primary">💌</span> Confirmar asistencia</h3> <button class="text-gray-500">✕</button></div> <div class="p-4"><!></div></div></dialog>');function ba(a,n){ut(n,!1);let i=D(n,"invite",8);const o=Dt();let c=O(),l=O(!1),d=O(!1),p=O(i().partyInvitations),v=O(i().stayInvitations),u=O("");const y="entry.23826224",f="entry.1899043457",x="entry.427068344",h="entry.446464576",k="entry.424554911",w="entry.38093445",I="entry.802664838";function j(){b(l,!1),t(c)?.close(),o("close")}async function _(a){a.preventDefault(),b(d,!0);try{const a=new FormData;a.append(y,i().code),a.append(f,i().name),a.append(x,i().partyInvitations.toString()),a.append(h,t(p).toString()),a.append(k,i().stayInvitations.toString()),a.append(w,t(v).toString()),a.append(I,t(u).trim()),await fetch("https://docs.google.com/forms/d/e/1FAIpQLSfPN3oQllE8Sc50IbpbxW4WkFsODtgeznrpPQ6xyGg1SftYdA/formResponse",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)}),b(l,!0),localStorage.setItem(`confirmation-${i().code}`,JSON.stringify({partyAttendance:t(p),stayInvitations:t(v),message:t(u),lastUpdate:(new Date).toISOString()})),o("confirmationUpdate",{partyAttendance:t(p),stayInvitations:t(v),message:t(u),lastUpdate:(new Date).toISOString()})}catch(t){console.error("Error al enviar el formulario:",t)}finally{b(d,!1)}}ht((()=>{t(c)?.showModal(),b(u,"");const a=localStorage.getItem(`confirmation-${i().code}`);if(a){const t=JSON.parse(a);b(p,t.partyAttendance),b(v,t.stayInvitations)}})),Kt((()=>t(p)),(()=>{0===t(p)&&b(v,0)})),Xt(),ft();var $=ya(),q=r($),C=r(q),z=s(r(C),2);e(C);var E=s(C,2),M=r(E),N=a=>{var n=ma(),o=r(n),c=r(o),l=r(c);e(c);var y=s(c,2),f=s(r(y)),x=t=>{var a=la();m(t,a)};S(f,(t=>{i().stayInvitations>0&&t(x)})),e(y),e(o);var h=s(o,2),k=r(h),w=r(k),I=s(r(w)),j=r(I);e(I),e(w);var $=s(w,2);A((()=>{t(p),qt((()=>{i()}))})),zt($,5,(()=>[...Array(i().partyInvitations+1).keys()]),Nt,((a,s)=>{var n=ca(),i={},o=r(n);e(n),A((()=>{i!==(i=t(s))&&(n.value=null==(n.__value=t(s))?"":t(s)),g(o,`${t(s)??""} ${(1===t(s)?"persona":"personas")??""}`)})),m(a,n)})),e($),e(k);var D=s(k,2),q=a=>{var n=va(),o=r(n),c=s(r(o)),l=r(c);e(c),e(o);var d=s(o,2);A((()=>{t(v),qt((()=>{t(p),i()}))})),zt(d,5,(()=>[...Array(Math.min(t(p),i().stayInvitations)+1).keys()]),Nt,((a,s)=>{var n=da(),i={},o=r(n);e(n),A((()=>{i!==(i=t(s))&&(n.value=null==(n.__value=t(s))?"":t(s)),g(o,`${t(s)??""} ${(1===t(s)?"persona":"personas")??""}`)})),m(a,n)})),e(d),e(n),A((()=>g(l,`(Dispones de ${i().stayInvitations??""}\n                    ${(1===i().stayInvitations?"plaza":"plazas")??""} para alojamiento)`))),Ot(d,(()=>t(v)),(t=>b(v,t))),m(a,n)};S(D,(a=>{i()&&i().stayInvitations>0&&t(p)>0&&a(q)}));var O=s(D,2),C=s(r(O),2);Zt(C),e(O);var z=s(O,2),E=r(z),M=r(E),N=t=>{var a=pa();m(t,a)};S(M,(a=>{t(d)&&a(N)}));var F=s(M);e(E),e(z),e(h),e(n),A((()=>{g(l,`¡Hola, ${i().name??""}!`),g(j,`(De las ${i().partyInvitations??""}\n                  ${(1===i().partyInvitations?"plaza reservada":"plazas reservadas")??""})`),E.disabled=t(d),g(F,` ${(t(d)?"Enviando...":"Confirmar asistencia")??""}`)})),Ot($,(()=>t(p)),(t=>b(p,t))),ea(C,(()=>t(u)),(t=>b(u,t))),L("submit",h,_),m(a,n)},F=a=>{var n=ua(),o=s(r(n),4),c=r(o,!0);e(o);var l=s(o,2),d=a=>{var s=fa(),n=r(s);e(s),A((()=>g(n,`Además, ${(1===t(v)?"disfrutarás del alojamiento":`${t(v)} personas disfrutarán del alojamiento`)??""} en la finca 🏡`))),m(a,s)};S(l,(a=>{i()&&i().stayInvitations>0&&t(v)>0&&a(d)}));var u=s(l,6);e(n),A((()=>g(c,0===t(p)?"Lamentamos que no puedas acompañarnos en este día tan especial":1===t(p)?"Nos alegra mucho saber que nos acompañarás en este día tan especial":`Nos alegra mucho saber que nos acompañarán ${t(p)} personas en este día tan especial`))),L("click",u,j),m(a,n)};S(M,(a=>{t(l)?a(F,!1):a(N)})),e(E),e(q),e($),Ft($,(t=>b(c,t)),(()=>t(c))),L("click",z,j),L("click",$,(({target:a})=>a===t(c)&&j())),m(a,$),yt()}var xa=_('<dialog class="hidden bg-transparent p-0 backdrop:bg-black backdrop:bg-opacity-50 [&amp;[open]]:flex items-center justify-center w-full h-full fixed inset-0 svelte-13t4ywx"><div class="bg-white rounded-lg w-full max-w-[600px] mx-4 dark:bg-slate-900"><div class="p-4 border-b flex justify-between items-center"><h3 class="text-lg font-semibold flex items-center gap-2"><span class="text-primary">ℹ️</span> Información</h3> <button class="text-gray-500">✕</button></div> <div class="p-6"><div class="text-center space-y-4"><h4 class="text-xl font-semibold">Invitación no encontrada</h4> <p class="text-gray-600 dark:text-gray-400">Para confirmar tu asistencia, debes usar el enlace de invitación que se te ha proporcionado.</p> <p class="text-gray-600 dark:text-gray-400">Si aún no cuentas con uno, por favor comunícate con Sergio o Katherine para solicitar una invitación.</p> <button class="btn btn-primary mt-4">Entendido</button></div></div></div></dialog>');function ga(a,n){ut(n,!1);const i=Dt();let o=O();function c(){t(o)?.close(),i("close")}ht((()=>{t(o)?.showModal()})),ft();var l=xa(),d=r(l),p=r(d),v=s(r(p),2);e(p);var u=s(p,2),y=r(u),f=s(r(y),6);e(y),e(u),e(d),e(l),Ft(l,(t=>b(o,t)),(()=>t(o))),L("click",v,c),L("click",f,c),L("click",l,(({target:a})=>a===t(o)&&c())),m(a,l),yt()}var _a=_('<p class="text-base text-secondary dark:text-blue-200 font-bold tracking-wide uppercase intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter mb-4"> </p>'),ha=_("<br><b>Cupos de alojamiento:</b> ",1),ka=_('<div class="basis-1/2 text-center lg:text-left pb-10 md:pb-16 mx-auto"><!> <h1 class="text-5xl md:text-6xl font-bold leading-tighter tracking-tighter mb-4 font-heading dark:text-gray-200 intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"> </h1> <div class="max-w-3xl mx-auto lg:max-w-none"><p class="text-xl text-muted mb-6 dark:text-slate-300 intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"> </p> <p class="text-xl text-secondary mb-6 dark:text-slate-300 intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"><!> <!></p> <div class="max-w-xs sm:max-w-md m-auto flex flex-nowrap flex-col sm:flex-row sm:justify-center gap-4 lg:justify-start lg:m-0 lg:max-w-7xl intersect-once motion-safe:md:intersect:animate-fade motion-safe:md:opacity-0 intersect-quarter"><a href="#rsvp" class="btn btn-primary w-full sm:w-auto"> <span class="ml-2">→</span></a> <a href="#evento" class="btn w-full sm:w-auto">Más información</a></div></div></div>');function wa(t,a){ut(a,!1);let n=D(a,"invite",8),i=D(a,"title",8),o=D(a,"subtitle",8),c=D(a,"content",8),l=D(a,"tagline",8);ft();var d=ka(),p=r(d),v=t=>{var a=_a(),s=r(a,!0);e(a),A((()=>g(s,l()))),m(t,a)};S(p,(t=>{l()&&t(v)}));var u=s(p,2),b=r(u,!0);e(u);var y=s(u,2),f=r(y),x=r(f,!0);e(f);var h=s(f,2),k=r(h);sa(k,(()=>n()?0===n().partyInvitations?"<b>Fecha:</b> 22 de marzo de 2025":`<b>Fecha:</b> 22 de marzo de 2025<br><b>Número de invitados:</b> ${n().partyInvitations}`:c()));var w=s(k,2),I=t=>{var a=ha(),e=s(mt(a),2);A((()=>g(e,` ${n().stayInvitations??""}`))),m(t,a)};S(w,(t=>{n()&&n().stayInvitations>0&&t(I)})),e(h);var j=s(h,2),_=r(j),$=r(_);Ct(),e(_),Ct(2),e(j),e(y),e(d),A((()=>{g(b,n()?`${n().name}`:i()),g(x,n()?0===n().partyInvitations?"Queremos compartir contigo la alegría de nuestro matrimonio y hacerte partícipe de este momento tan especial.":"Nos llena de alegría invitarte a ser parte de este momento tan especial en nuestras vidas.":o()),g($,`${(0===n()?.partyInvitations?"Ver detalles":"Confirmar asistencia")??""} `)})),m(t,d),yt()}var Ia=_('<div class="flex justify-center items-center min-h-[200px]"><div class="animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"></div></div>'),Sa=_('<p class="text-lg text-primary opacity-100"> </p>'),Aa=_('<div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"><p class="text-green-700 dark:text-green-300"> <!></p> <p class="text-sm text-green-600 dark:text-green-400 mt-1"> </p></div>'),ja=_('<div class="space-y-4 opacity-100"><h3 class="text-2xl font-semibold text-primary"> </h3> <p class="text-lg"> </p> <!> <!> <button type="button" class="btn btn-primary w-full sm:w-auto"> </button></div>'),qa=_('<div class="space-y-4"><h3 class="text-2xl font-semibold text-primary">¿Tienes una invitación? 💌</h3> <p class="text-lg">Para confirmar tu asistencia, necesitas usar el enlace de invitación que te proporcionamos.</p> <p class="text-muted">Si aún no tienes uno, contacta con nosotros para solicitar tu invitación.</p> <button type="button" class="btn btn-primary w-full sm:w-auto">Verificar invitación</button></div>'),Ca=_('<div class="space-y-6 opacity-100"><!></div>'),Ma=_('<button type="button" class="btn btn-primary w-full sm:w-auto"><span class="flex items-center justify-center">Confirmar asistencia <span class="ml-2">→</span></span></button>'),za=_("<!> <!> <!>",1);function Ua(a,n){ut(n,!1);let i=D(n,"showFullInfo",8,!1),o=D(n,"title",8,""),c=D(n,"subtitle",8,""),l=D(n,"content",8,""),d=D(n,"tagline",8,""),p=D(n,"heroMode",8,!1),v=O(),u=O(!1),y=O(!1),f=O(!0),x=O(null);async function h(){try{const a=await async function(){try{return(await(await fetch("/data/invites.json")).json()).invites}catch(t){return console.error("Error loading invites:",t),[]}}(),e=na();if(b(v,a.find((t=>t.code===e))),t(v)){const a=localStorage.getItem(`confirmation-${t(v).code}`);a&&b(x,JSON.parse(a))}}catch(t){console.error("Error initializing:",t)}finally{b(f,!1)}}function k(){t(v)?b(u,!0):b(y,!0)}function w(t){b(x,t.detail)}ht((()=>{h()})),ft();var I=za(),j=mt(I),_=t=>{var a=Ia();m(t,a)},$=a=>{var n=Mt(),u=mt(n),b=a=>{wa(a,{get invite(){return t(v)},get title(){return o()},get subtitle(){return c()},get content(){return l()},get tagline(){return d()}})},y=a=>{var n=Mt(),o=mt(n),c=a=>{var n=Ca(),i=r(n),o=a=>{var n=ja(),i=r(n),o=r(i);e(i);var c=s(i,2),l=r(c);e(c);var d=s(c,2),p=a=>{var s=Sa(),n=r(s);e(s),A((()=>g(n,`¡Además estás invitado a quedarte en la finca! Tienes ${t(v).stayInvitations??""}\n            ${(1===t(v).stayInvitations?"plaza":"plazas")??""} disponibles para alojamiento.`))),m(a,s)};S(d,(a=>{t(v).stayInvitations>0&&a(p)}));var u=s(d,2),b=a=>{var n=Aa(),i=r(n),o=r(i),c=s(o),l=a=>{var e=aa();A((()=>g(e,`y ${t(x).stayInvitations??""} para alojamiento`))),m(a,e)};S(c,(a=>{t(x).stayInvitations>0&&a(l)})),e(i);var d=s(i,2),p=r(d);A((()=>g(p,`Última actualización: ${new Date(t(x).lastUpdate).toLocaleString()??""}`))),e(d),e(n),A((()=>g(o,`Has confirmado ${t(x).partyAttendance??""}\n              ${(1===t(x).partyAttendance?"asistente":"asistentes")??""} `))),m(a,n)};S(u,(a=>{t(x)&&a(b)}));var y=s(u,2),f=r(y,!0);e(y),e(n),A((()=>{g(o,`¡Hola, ${t(v).name??""}! 👋`),g(l,`Tienes ${t(v).partyInvitations??""}\n          ${(1===t(v).partyInvitations?"invitación":"invitaciones")??""} para nuestro evento`),g(f,t(x)?"Actualizar Confirmación":"Confirmar mi Asistencia")})),L("click",y,k),m(a,n)},c=t=>{var a=qa(),n=s(r(a),6);e(a),L("click",n,k),m(t,a)};S(i,(a=>{t(v)?a(o):a(c,!1)})),e(n),m(a,n)},l=t=>{var a=Ma();L("click",a,k),m(t,a)};S(o,(t=>{i()?t(c):t(l,!1)}),!0),m(a,n)};S(u,(t=>{p()?t(b):t(y,!1)}),!0),m(a,n)};S(j,(a=>{t(f)?a(_):a($,!1)}));var q=s(j,2),C=a=>{ba(a,{get invite(){return t(v)},$$events:{close:()=>b(u,!1),confirmationUpdate:w}})};S(q,(a=>{t(u)&&t(v)&&a(C)}));var z=s(q,2),E=t=>{ga(t,{$$events:{close:()=>b(y,!1)}})};S(z,(a=>{t(y)&&a(E)})),m(a,I),yt()}export{Ua as default};