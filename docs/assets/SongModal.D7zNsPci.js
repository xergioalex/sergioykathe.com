import{o as $,i as ee}from"./index-client.CISZeMRU.js";import{p as ae,t as R,R as y,a as x,b as te,g as t,s as o,m as p,e as s,d as i,r as n,S as re,h as oe,T as se,n as ne,U as ie}from"./template.LJwQLpMB.js";import{i as F,b as le}from"./this.BqRXYm-0.js";import{r as G}from"./attributes.CgWVCr6e.js";import{b as M}from"./input.tZi1eWRs.js";import{a as Q}from"./analytics.DfSQxh5K.js";import{g as de}from"./invite.C41q0KXj.js";import"./class.DXTTsRNX.js";var ce=se('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Enviando...',1),me=R('<form class="space-y-4"><div><label for="songName" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nombre de la CanciÃ³n</label> <input type="text" id="songName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white" placeholder="Ej: Amor Eterno"></div> <div><label for="songArtist" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Artista</label> <input type="text" id="songArtist" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white" placeholder="Ej: Juan Gabriel"></div> <div><label for="songNotes" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Notas adicionales o link</label> <textarea id="songNotes" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:bg-slate-800 dark:border-gray-700 dark:text-white resize-none" rows="3" placeholder="Ej: Link de YouTube o algÃºn comentario sobre la canciÃ³n">\n            </textarea></div> <div class="flex justify-center"><button type="submit" class="btn btn-primary"><!></button></div></form>'),pe=R('<div class="text-center space-y-6"><div class="space-y-2"><span class="text-5xl">ðŸŽµ</span> <h4 class="text-xl font-semibold text-primary">Â¡Gracias por tu sugerencia!</h4> <p class="text-gray-600 dark:text-gray-400">Tu canciÃ³n ha sido agregada a nuestra lista de reproducciÃ³n.</p></div> <div class="flex gap-4 justify-center"><button type="button" class="btn btn-secondary">Agregar otra canciÃ³n</button> <button type="button" class="btn btn-primary">Cerrar</button></div></div>'),ue=R('<dialog class="hidden bg-transparent p-0 backdrop:bg-black backdrop:bg-opacity-50 [&amp;[open]]:flex items-center justify-center w-full h-full fixed inset-0 svelte-k3kgo8"><div role="dialog" aria-labelledby="modal-title" aria-modal="true" class="bg-white rounded-lg w-full max-w-[600px] mx-0 sm:mx-4 max-h-[90vh] overflow-hidden dark:bg-slate-900"><div class="p-4 border-b flex justify-between items-center"><h3 id="modal-title" class="text-lg font-semibold flex items-center gap-2"><span class="text-primary">ðŸŽµ</span> Sugerir canciones</h3> <button type="button" class="text-gray-500 hover:text-gray-700" aria-label="Cerrar diÃ¡logo">âœ•</button></div> <div class="p-6"><!></div></div></dialog>');function _e(e,a){ae(a,!1);let r,l=p(),c=p(""),d=p(""),m=p(""),u=p(!1),g=p(!1);const b="entry.242037522",f="entry.287920603",v="entry.1265334069",h="entry.734514235",w="entry.1876986626";async function k(){try{const e=await async function(){try{return(await(await fetch("/data/invites.json")).json()).invites}catch(e){return console.error("Error loading invites:",e),[]}}(),t=de();r=e.find((e=>e.code===t))}catch(e){console.error("Error initializing:",e)}}function j(){o(u,!1),R(),t(l)?.close()}function R(){o(u,!1),o(c,""),o(d,""),o(m,"")}async function C(e){e.preventDefault(),o(g,!0);try{const e=new FormData;e.append(b,t(c)),e.append(f,t(d)),e.append(v,t(m)),r&&(e.append(h,r.code),e.append(w,r.name)),await fetch("https://docs.google.com/forms/d/e/1FAIpQLSfBNmQYetQjkbnGOfwhD6QB8CxhRkXTGr7oa9Y8XgRRdBGe8Q/formResponse",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)}),Q.capture("song_suggestion_submitted",{song_name:t(c),artist:t(d),has_notes:!!t(m)}),o(u,!0)}catch(e){console.error("Error al enviar el formulario:",e),Q.capture("song_suggestion_failed",{error:e.message,song_name:t(c),artist:t(d)})}finally{o(g,!1)}}$((()=>(k(),document.addEventListener("openSongModal",(()=>{R(),t(l)?.showModal()})),()=>{document.removeEventListener("openSongModal",(()=>{t(l)?.showModal()}))}))),ee();var E=ue(),S=s(E),_=s(S),N=i(s(_),2);n(_);var T=i(_,2),A=s(T),L=e=>{var a=me(),r=s(a),l=i(s(r),2);G(l),n(r);var p=i(r,2),u=i(s(p),2);G(u),n(p);var b=i(p,2),f=i(s(b),2);re(f),n(b);var v=i(b,2),h=s(v),w=s(h),k=e=>{var t=ce();ne(),x(e,t)},j=e=>{var t=ie("Enviar Sugerencia");x(e,t)};F(w,(e=>{t(g)?e(k):e(j,!1)})),n(h),n(v),n(a),oe((()=>h.disabled=t(g))),M(l,(()=>t(c)),(e=>o(c,e))),M(u,(()=>t(d)),(e=>o(d,e))),M(f,(()=>t(m)),(e=>o(m,e))),y("submit",a,C),x(e,a)},B=e=>{var t=pe(),a=i(s(t),2),r=s(a),o=i(r,2);n(a),n(t),y("click",r,R),y("click",o,j),x(e,t)};F(A,(e=>{t(u)?e(B,!1):e(L)})),n(T),n(S),n(E),le(E,(e=>o(l,e)),(()=>t(l))),y("click",N,j),y("click",E,(function(e){e.target===t(l)&&j()})),x(e,E),te()}export{_e as default};