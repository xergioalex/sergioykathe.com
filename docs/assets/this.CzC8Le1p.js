import{b as k,h as c,a as y,an as I,R as N,S as R,s as L,T as d,K as T,c as b,L as o,d as g,ao as q,m as x,ak as D,aj as F,ap as O,aa as Y}from"./template.BSgtRvOR.js";function p(r,f,t=!1){c&&y();var i=r,s=null,a=null,l=q,v=t?I:0,n=!1;const A=(u,e=!0)=>{n=!0,h(e,u)},h=(u,e)=>{if(l===(l=u))return;let _=!1;if(c){const S=i.data===N;!!l===S&&(i=R(),L(i),d(!1),_=!0)}l?(s?T(s):e&&(s=b(()=>e(i))),a&&o(a,()=>{a=null})):(a?T(a):e&&(a=b(()=>e(i))),s&&o(s,()=>{s=null})),_&&d(!0)};k(()=>{n=!1,f(A),n||h(null,null)},v),c&&(i=g)}function E(r,f){return r===f||r?.[Y]===f}function B(r={},f,t,i){return x(()=>{var s,a;return D(()=>{s=a,a=[],F(()=>{r!==t(...a)&&(f(r,...a),s&&E(t(...s),r)&&f(null,...s))})}),()=>{O(()=>{a&&E(t(...a),r)&&f(null,...a)})}}),r}export{B as b,p as i};
